!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).monthSelectPlugin=t()}(this,function(){"use strict";var t=function(){return(t=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function f(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function u(t){try{return"function"!=typeof t.composedPath?t.target:t.composedPath()[0]}catch(e){return t.target}}var n={shorthand:!1,dateFormat:"F Y",altFormat:"F Y",theme:"light"};return function(e){var i=t(t({},n),e);return function(c){c.config.dateFormat=i.dateFormat,c.config.altFormat=i.altFormat;var l={monthsContainer:null};function t(){if(l.monthsContainer){f(l.monthsContainer);for(var e,t=document.createDocumentFragment(),n=0;n<12;n++){var o=c.createDay("flatpickr-monthSelect-month",new Date(c.currentYear,n),0,n);o.dateObj.getMonth()===(new Date).getMonth()&&o.dateObj.getFullYear()===(new Date).getFullYear()&&o.classList.add("today"),o.textContent=(e=i.shorthand,c.l10n.months[e?"shorthand":"longhand"][n]),o.addEventListener("click",a),t.appendChild(o)}l.monthsContainer.appendChild(t),c.config.minDate&&c.currentYear===c.config.minDate.getFullYear()?c.prevMonthNav.classList.add("flatpickr-disabled"):c.prevMonthNav.classList.remove("flatpickr-disabled"),c.config.maxDate&&c.currentYear===c.config.maxDate.getFullYear()?c.nextMonthNav.classList.add("flatpickr-disabled"):c.nextMonthNav.classList.remove("flatpickr-disabled")}}function o(){if(c.rContainer&&c.selectedDates.length){for(var e=c.rContainer.querySelectorAll(".flatpickr-monthSelect-month.selected"),t=0;t<e.length;t++)e[t].classList.remove("selected");var n=c.selectedDates[0].getMonth(),n=c.rContainer.querySelector(".flatpickr-monthSelect-month:nth-child("+(n+1)+")");n&&n.classList.add("selected")}}function n(){var e=c.selectedDates[0];e&&((e=new Date(e)).setFullYear(c.currentYear),c.config.minDate&&e<c.config.minDate&&(e=c.config.minDate),c.config.maxDate&&e>c.config.maxDate&&(e=c.config.maxDate),c.currentYear=e.getFullYear()),c.currentYearElement.value=String(c.currentYear),c.rContainer&&c.rContainer.querySelectorAll(".flatpickr-monthSelect-month").forEach(function(e){e.dateObj.setFullYear(c.currentYear),c.config.minDate&&e.dateObj<c.config.minDate||c.config.maxDate&&e.dateObj>c.config.maxDate?e.classList.add("flatpickr-disabled"):e.classList.remove("flatpickr-disabled")}),o()}function a(e){e.preventDefault(),e.stopPropagation();var t=u(e);t instanceof Element&&(t.classList.contains("flatpickr-disabled")||t.classList.contains("notAllowed")||(s(t.dateObj),c.config.closeOnSelect&&(e="single"===c.config.mode,t="range"===c.config.mode&&2===c.selectedDates.length,(e||t)&&c.close())))}function s(e){var t=new Date(c.currentYear,e.getMonth(),e.getDate()),n=[];switch(c.config.mode){case"single":n=[t];break;case"multiple":n.push(t);break;case"range":2===c.selectedDates.length?n=[t]:(n=c.selectedDates.concat([t])).sort(function(e,t){return e.getTime()-t.getTime()})}c.setDate(n,!0),o()}var d={37:-1,39:1,40:3,38:-3};function r(){var e;"range"===(null===(e=c.config)||void 0===e?void 0:e.mode)&&1===c.selectedDates.length&&c.clear(!1),c.selectedDates.length||t()}return{onParseConfig:function(){c.config.enableTime=!1},onValueUpdate:o,onKeyDown:function(e,t,n,o){var a,r,i=void 0!==d[o.keyCode];(i||13===o.keyCode)&&c.rContainer&&l.monthsContainer&&(r=c.rContainer.querySelector(".flatpickr-monthSelect-month.selected"),-1===(a=Array.prototype.indexOf.call(l.monthsContainer.children,document.activeElement))&&((r=r||l.monthsContainer.firstElementChild).focus(),a=r.$i),i?l.monthsContainer.children[(12+a+d[o.keyCode])%12].focus():13===o.keyCode&&l.monthsContainer.contains(document.activeElement)&&s(document.activeElement.dateObj))},onReady:[function(){i._stubbedCurrentMonth=c._initialDate.getMonth(),c._initialDate.setMonth(i._stubbedCurrentMonth),c.currentMonth=i._stubbedCurrentMonth},function(){if(c.rContainer){f(c.rContainer);for(var e=0;e<c.monthElements.length;e++){var t=c.monthElements[e];t.parentNode&&t.parentNode.removeChild(t)}}},function(){c.rContainer&&(l.monthsContainer=c._createElement("div","flatpickr-monthSelect-months"),l.monthsContainer.tabIndex=-1,t(),c.rContainer.appendChild(l.monthsContainer),c.calendarContainer.classList.add("flatpickr-monthSelect-theme-"+i.theme))},function(){c._bind(c.prevMonthNav,"click",function(e){e.preventDefault(),e.stopPropagation(),c.changeYear(c.currentYear-1),n(),t()}),c._bind(c.nextMonthNav,"click",function(e){e.preventDefault(),e.stopPropagation(),c.changeYear(c.currentYear+1),n(),t()}),c._bind(l.monthsContainer,"mouseover",function(e){"range"===c.config.mode&&c.onMouseOver(u(e),"flatpickr-monthSelect-month")})},o,function(){c.config.onClose.push(r),c.loadedPlugins.push("monthSelect")}],onDestroy:[function(){i._stubbedCurrentMonth&&(c._initialDate.setMonth(i._stubbedCurrentMonth),c.currentMonth=i._stubbedCurrentMonth,delete i._stubbedCurrentMonth)},function(){if(null!==l.monthsContainer)for(var e=l.monthsContainer.querySelectorAll(".flatpickr-monthSelect-month"),t=0;t<e.length;t++)e[t].removeEventListener("click",a)},function(){c.config.onClose=c.config.onClose.filter(function(e){return e!==r})}]}}}});